{"ast":null,"code":"var _jsxFileName = \"/Users/oyejin/Surfee/kiwi/src/pages/Make/MakePageV2.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState, useRef, createContext } from 'react';\nimport './MakePage.css';\nimport './MakeLanding.css'; // Recoil , Immer JS ì ìš©\n// \n\nimport { dbService } from '../../tools/fbase';\nimport { stService } from '../../tools/fbase';\nimport { Link } from 'react-router-dom';\nimport NewSection from '../../components/Make/NewSection';\nimport NewSectionMake from '../../components/Make/Edit/NewSectionMake';\nimport EditSetting from '../../components/Make/Edit/NavFooterSetting/EditSetting';\nimport NavBarInMakePage from './NavBarInMakePage/NavBarInMakePage';\nimport MakeNavigationV2 from '../../components/Make/NavBar/MakeNavigationV2';\nimport MakeFooterV2 from '../../components/Make/Footer/MakeFooterV2';\nimport FirstQuestions from '../Questions/FirstQuestions';\nimport LoadingModal from '../../components/Make/Modal/LoadingModal';\nimport OverflowScrolling from 'react-overflow-scrolling';\nimport { v4 as uuidv4 } from 'uuid';\nimport { useLocation, useParams } from 'react-router';\nimport { base } from '../../components/Make/SectionTypes/baseTypes';\nimport ReactGa from 'react-ga';\nimport lodash from 'lodash';\nimport EditNaviSection from '../../components/Make/Edit/NavFooterSetting/EditNaviSection';\nimport EditFooterSection from '../../components/Make/Edit/NavFooterSetting/EditFooterSection';\nimport EditContents from '../../components/Make/Edit/NavFooterSetting/EditContents';\nimport ConfirmCustom from '../../tools/ConfirmCustom';\nimport { motion } from 'framer-motion';\nimport { isMobile } from 'react-device-detect';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const MyContext = /*#__PURE__*/React.createContext({\n  state: {\n    addingSectionAt: 1000\n  },\n  action: {\n    setAddingSectionAt: () => {}\n  }\n});\nconst label = {\n  inputProps: {\n    'aria-label': 'Switch demo'\n  }\n};\nconst smallfont = `28px`;\nconst bigfont = '50px';\nconst rate = 0.63;\nconst NOTADDING = 1000;\n\nconst MakePageV2 = ({\n  history,\n  userObj\n}, props) => {\n  _s();\n\n  const targets = useRef(null); // ë°ì´í„° ë² ì´ìŠ¤ì— ì €ì¥í•˜ì§€ ì•Šê³  ì œì‘ì„ ìœ„í•´ì„œë§Œ ì‚¬ìš©ë˜ëŠ” ê²ƒë“¤.\n\n  const [secNum, setSecNum] = useState(0); // í˜„ì¬ ìˆ˜ì •ì¤‘ì¸ í˜ì´ì§€ë¥¼ ì˜ë¯¸.\n\n  const [loading, setLoading] = useState(false);\n  const [open, setOpen] = useState(false); // ì²« ì§ˆë¬¸ì„ ìœ„í•œ Open\n\n  const [isPhone, setIsPhone] = useState(true);\n  const [full, setFull] = useState(false);\n  const [isWidget, setIsWidget] = useState(true);\n  const [password, setPassword] = useState(\"\");\n  const [nowState, setNowState] = useState('new');\n  const [load, setLoad] = useState(false);\n  const [editing, setEditing] = useState(false);\n  const location = useLocation(); // ë©”ì¸ ì„¸íŒ…\n\n  const [setting, setSetting] = useState({\n    urlId: '',\n    faviconAttachment: '',\n    font: '',\n    smallFont: '',\n    color: '',\n    fta: {\n      use: false,\n      backgroundColor: 'rgba(150,150,0,1)',\n      text: 'fta ë²„íŠ¼'\n    }\n  }); // ìƒˆë¡œìš´ ì„¸íŒ…\n\n  const [contents, setContents] = useState([lodash.cloneDeep(base[0]), lodash.cloneDeep(base[1]), lodash.cloneDeep(base[2]), lodash.cloneDeep(base[4])]); // ë„¤ë¹„ê²Œì´ì…˜\n\n  const [navi, setNavi] = useState({\n    sectionTemplateNumber: 1,\n    use: true,\n    title: 'Surfee',\n    fixed: false,\n    isLogo: 'logo',\n    logo: '',\n    backgroundColor: 'rgba(0,0,0,0)',\n    bottomBorder: false,\n    button: {\n      use: true,\n      func: 'link',\n      templateNum: 1,\n      link: 'www.naver.com',\n      title: 'ì‹ ì²­í•˜ê¸°',\n      color: 'rgba(0,0,0,0.4)'\n    }\n  }); // í‘¸í„°\n\n  const [foot, setFoot] = useState({\n    sectionTemplateNumber: 1,\n    use: true,\n    backgroundColor: 'white',\n    padding: 1,\n    text: \"<p style=\\\"text-align:center;\\\">About Us - Contact Us - ê°œì¸ì •ë³´ ì²˜ë¦¬ë°©ì¹¨ - íŒ€ ì†Œê°œ</p><p style=\\\"text-align:center;\\\">E-mail : surfee.business@gmail.com</p><p style=\\\"text-align:center;\\\"><strong>2021 Copyright Â© , All rights reserved</strong></p>\",\n    iconUse: true,\n    iconStyle: 'circle',\n    iconColor: 'white',\n    iconAlign: 'start',\n    icons: [],\n    second: {\n      text: '<p>ë‘ë²ˆ ì§¸ ë‹¨ì…ë‹ˆë‹¤.</p>'\n    }\n  });\n  const [addingSectionAt, setAddingSectionAt] = useState(NOTADDING); // 1000ì€ ì¶”ê°€í•˜ê³  ìˆì§€ ì•Šë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸.\n\n  const [urlId, setUrlId] = useState(\"\"); // í‘¸í„°\n\n  const [footerOrNot, setFooterOrNot] = useState(false); // ë°˜ë³µ ì‹¤í–‰ë˜ëŠ” useEffect\n\n  useEffect(() => {\n    // to report page view\n    // ReactGa.initialize('UA-213792742-1');\n    // ReactGa.pageview(`/making/${userObj.email}`);\n    function repeat() {\n      localStorage.setItem('temp', JSON.stringify([contents, navi, foot, setting]));\n    } // 30ì´ˆì— í•œë²ˆ ì”© ìë™ ì €ì¥\n\n\n    let id = setInterval(repeat, 30000);\n    return () => clearInterval(id);\n  }); // ì²˜ìŒì— í•œë²ˆë§Œ ì‹¤í–‰ë˜ëŠ” useEffect\n\n  useEffect(() => {\n    // ê´€ë¦¬í•˜ê¸° í˜ì´ì§€ì—ì„œ state.itemìœ¼ë¡œ ë‚´ìš©ì„ ê°€ì§€ê³  ë„˜ì–´ì™”ë‹¤.\n    if (location.state !== undefined) {\n      const arr = location.pathname.split('/');\n      setNowState(arr[arr.length - 1]);\n      const item = location.state.item;\n      setContents(item[0]);\n      setNavi(item[1]);\n      setFoot(item[2]);\n      setSetting(item[3]);\n      setOpen(false);\n      setEditing(true);\n    } else {\n      // ë¡œì»¬ìŠ¤í† ë¦¬ì§€ì— ì €ì¥ë˜ì–´ì¸ê²Œ ìˆë‹¤ë©´\n      if (localStorage.getItem('temp') !== null) {\n        // const cf = window.confirm(\"ì‘ì—…ì¤‘ì´ë˜ í˜ì´ì§€ê°€ ìˆìŠµë‹ˆë‹¤. ë¶ˆëŸ¬ì˜¤ì‹œê² ìŠµë‹ˆê¹Œ? ì·¨ì†Œ ì‹œ ì´ì „ì— ì‘ì—…í•˜ë˜ ë‚´ìš©ì€ ì‚¬ë¼ì§‘ë‹ˆë‹¤.\");\n        setFooterOrNot(true); // if(cf){\n        //     const temp = JSON.parse(localStorage.getItem('temp'));\n        //     setContents(temp[0]);\n        //     setNavi(temp[1]);\n        //     setFoot(temp[2]);\n        //     setSetting(temp[3]);\n        //     setOpen(false);\n        //     setEditing(true);\n        // }else{\n        // }\n      } else {\n        localStorage.setItem('temp', JSON.stringify([contents, navi, foot, setting]));\n      }\n    }\n\n    setLoad(true);\n  }, []);\n  const contextValue = {\n    state: {\n      addingSectionAt,\n      secNum,\n      contents,\n      isPhone\n    },\n    action: {\n      setAddingSectionAt,\n      setSecNum,\n      setContents,\n      setIsPhone\n    }\n  };\n\n  const loadLocalStorage = () => {\n    const temp = JSON.parse(localStorage.getItem('temp'));\n    setContents(temp[0]);\n    setNavi(temp[1]);\n    setFoot(temp[2]);\n    setSetting(temp[3]);\n    setOpen(false);\n    setEditing(true);\n  };\n\n  const doSave = async () => {\n    // ì €ì¥í•˜ê¸°\n    if (password.length < 4) {\n      alert(\"4ê¸€ì ì´ìƒ ì…ë ¥í•´ì£¼ì‹œê¸° ë°”ëë‹ˆë‹¤.\");\n      return;\n    } else {\n      setLoading(true);\n      const checkDatas = await dbService.collection(\"apply-landing\").where(\"password\", \"==\", password).get(); // uidë¥¼ creatorIdë¡œ ì¤¬ì—ˆìœ¼ë‹ˆê¹Œ.\n\n      let checkData = checkDatas.docs.map(doc => {\n        return { ...doc.data(),\n          id: doc.id\n        };\n      });\n      const attachmentRef = stService.ref().child(`${urlId}/${uuidv4()}`);\n      const oneLandingPage = {};\n\n      if (checkData.length === 0) {\n        // ì—†ìœ¼ë©´ ìƒˆë¡œ ì €ì¥\n        await dbService.collection(\"apply-landing\").add(oneLandingPage);\n        alert(\"ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!\");\n        setLoading(false);\n        return;\n      } else {\n        // ìˆìœ¼ë©´ ì—…ë°ì´íŠ¸                \n        await dbService.doc(`apply-landing/${checkData[0].id}`).update(oneLandingPage);\n        alert(\"ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!\");\n        setLoading(false);\n        return;\n      }\n    }\n  };\n\n  const doLoad = async () => {\n    setLoading(true);\n    const checkDatas = await dbService.collection(\"apply-landing\").where(\"password\", \"==\", password).get(); // uidë¥¼ creatorIdë¡œ ì¤¬ì—ˆìœ¼ë‹ˆê¹Œ.\n\n    let checkData = checkDatas.docs.map(doc => {\n      return { ...doc.data(),\n        id: doc.id\n      };\n    });\n\n    if (checkData.length === 0) {\n      alert(\"í•´ë‹¹í•˜ëŠ” ë¶ˆëŸ¬ì˜¤ê¸° ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤!\");\n      return;\n    } else {}\n  };\n\n  const selectorTable = () => {\n    // 50ì€ ë‚´ë¹„ë¥¼ ì˜ë¯¸, 51ì€ í‘¸í„°ë¥¼ ì˜ë¯¸, 52ëŠ” ê¸°ë³¸ì„¸íŒ…ì„ ì˜ë¯¸\n    return /*#__PURE__*/_jsxDEV(NewSectionMake, {\n      content: contents[secNum],\n      foot: foot,\n      setFoot: setFoot,\n      navi: navi,\n      setNavi: setNavi,\n      setting: setting,\n      setSetting: setSetting\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 253,\n      columnNumber: 13\n    }, this);\n  };\n\n  const sectionsReturn = contents.map((item, index) => {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        width: '100%'\n      },\n      children: /*#__PURE__*/_jsxDEV(NewSection, {\n        content: item,\n        index: index,\n        setSecNum: setSecNum,\n        contents: contents,\n        setContents: setContents\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 260,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 259,\n      columnNumber: 13\n    }, this);\n  });\n\n  const backgroundClick = e => {// if(e.target.className === \"make-left-landing\" || e.target.className === \"for-section-hover\"){\n    //     setSecNum(CONTENTSSECNUM)\n    //     setAddingSectionAt(NOTADDING);\n    // }\n    // else{\n    //     return;\n    // }\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: isMobile ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mobile-hide\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\"\\uBCF8 \\uC0AC\\uC774\\uD2B8\\uB294 PC\\uD658\\uACBD\\uC5D0 \\uCD5C\\uC801\\uD654\\uB418\\uC5B4\\uC788\\uC2B5\\uB2C8\\uB2E4. \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 279,\n          columnNumber: 41\n        }, this), \"PC\\uB85C \\uC774\\uB3D9\\uD574\\uC11C \\uB79C\\uB529\\uD398\\uC774\\uC9C0 \\uC81C\\uC791\\uC744 \\uC2DC\\uC791\\uD574\\uBCF4\\uC138\\uC694. \\uD83D\\uDE01\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 278,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 277,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(MyContext.Provider, {\n        value: contextValue,\n        children: [/*#__PURE__*/_jsxDEV(NavBarInMakePage, {\n          doLoad: doLoad,\n          history: history,\n          userObj: userObj,\n          open: open,\n          setOpen: setOpen,\n          full: full,\n          setFull: setFull,\n          isPhone: isPhone,\n          setIsPhone: setIsPhone,\n          doSave: doSave,\n          nowState: nowState,\n          loading: loading,\n          setLoading: setLoading,\n          navi: navi,\n          foot: foot,\n          setting: setting\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 286,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"make-page-container\",\n          style: {\n            marginTop: '0px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              justifyContent: 'center',\n              alignItems: 'center'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"make-page-make-space\",\n              style: {\n                display: `${full ? 'none' : 'flex'}`\n              },\n              children: /*#__PURE__*/_jsxDEV(OverflowScrolling, {\n                className: \"overflow-scrolling\",\n                children: selectorTable()\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 299,\n                columnNumber: 25\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 298,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"fake-make\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 304,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 297,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"make-left-landing\",\n            onClick: e => backgroundClick(e),\n            children: /*#__PURE__*/_jsxDEV(motion.div, {\n              className: \"scroll-container\",\n              style: {\n                width: `${full ? '100%' : '90%'}`\n              },\n              animate: isPhone ? {\n                width: ['80%', '40%'],\n                transition: {\n                  duration: 0.3\n                }\n              } : {},\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                ref: targets,\n                className: \"make-main-page-container\",\n                style: {\n                  fontSize: `${full ? `${bigfont}` : `${smallfont}`}`,\n                  borderRadius: `${isPhone ? '7px' : '0px'}`\n                },\n                children: [navi.use && /*#__PURE__*/_jsxDEV(MakeNavigationV2, {\n                  full: full,\n                  navi: navi,\n                  setNavi: setNavi,\n                  history: history\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 323,\n                  columnNumber: 42\n                }, this), sectionsReturn, foot.use && /*#__PURE__*/_jsxDEV(MakeFooterV2, {\n                  full: full,\n                  history: history,\n                  foot: foot,\n                  setFoot: setFoot\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 330,\n                  columnNumber: 42\n                }, this), setting.fta.use && targets.current && /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"fta-button\",\n                  style: {\n                    backgroundColor: `${setting.fta.backgroundColor}`,\n                    width: `${isPhone ? 300 : 600}px`\n                  },\n                  children: setting.fta.text\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 333,\n                  columnNumber: 33\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 320,\n                columnNumber: 25\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 309,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 308,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 295,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            width: '80%',\n            justifyContent: 'center',\n            alignItems: 'center',\n            marginTop: '10%',\n            position: 'absolute',\n            bottom: '70px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(FirstQuestions, {\n            open: open,\n            setOpen: setOpen,\n            navi: navi,\n            setNavi: setNavi,\n            editing: editing,\n            setEditing: setEditing,\n            setting: setting,\n            setSetting: setSetting\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 344,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(LoadingModal, {\n            loading: loading\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 345,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 343,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(ConfirmCustom, {\n          open: footerOrNot,\n          setOpen: setFooterOrNot,\n          message: \"ì œì‘ ì¤‘ì´ë˜ í˜ì´ì§€ê°€ ìˆìŠµë‹ˆë‹¤. ë¶ˆëŸ¬ì˜¤ì‹œê² ìŠµë‹ˆê¹Œ? ì·¨ì†Œ ì‹œ ì´ì „ì— ì‘ì—…í•˜ë˜ ë‚´ìš©ì€ ì‚¬ë¼ì§‘ë‹ˆë‹¤.\",\n          callback: loadLocalStorage\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 347,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 285,\n        columnNumber: 8\n      }, this)\n    }, void 0, false)\n  }, void 0, false);\n};\n\n_s(MakePageV2, \"QHD1qm381PtXv3N/WyA3hkIQ4Us=\", false, function () {\n  return [useLocation];\n});\n\n_c = MakePageV2;\nexport default MakePageV2;\n\nvar _c;\n\n$RefreshReg$(_c, \"MakePageV2\");","map":{"version":3,"sources":["/Users/oyejin/Surfee/kiwi/src/pages/Make/MakePageV2.js"],"names":["React","useEffect","useState","useRef","createContext","dbService","stService","Link","NewSection","NewSectionMake","EditSetting","NavBarInMakePage","MakeNavigationV2","MakeFooterV2","FirstQuestions","LoadingModal","OverflowScrolling","v4","uuidv4","useLocation","useParams","base","ReactGa","lodash","EditNaviSection","EditFooterSection","EditContents","ConfirmCustom","motion","isMobile","MyContext","state","addingSectionAt","action","setAddingSectionAt","label","inputProps","smallfont","bigfont","rate","NOTADDING","MakePageV2","history","userObj","props","targets","secNum","setSecNum","loading","setLoading","open","setOpen","isPhone","setIsPhone","full","setFull","isWidget","setIsWidget","password","setPassword","nowState","setNowState","load","setLoad","editing","setEditing","location","setting","setSetting","urlId","faviconAttachment","font","smallFont","color","fta","use","backgroundColor","text","contents","setContents","cloneDeep","navi","setNavi","sectionTemplateNumber","title","fixed","isLogo","logo","bottomBorder","button","func","templateNum","link","foot","setFoot","padding","iconUse","iconStyle","iconColor","iconAlign","icons","second","setUrlId","footerOrNot","setFooterOrNot","repeat","localStorage","setItem","JSON","stringify","id","setInterval","clearInterval","undefined","arr","pathname","split","length","item","getItem","contextValue","loadLocalStorage","temp","parse","doSave","alert","checkDatas","collection","where","get","checkData","docs","map","doc","data","attachmentRef","ref","child","oneLandingPage","add","update","doLoad","selectorTable","sectionsReturn","index","width","backgroundClick","e","marginTop","display","justifyContent","alignItems","transition","duration","fontSize","borderRadius","current","position","bottom"],"mappings":"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","sourcesContent":["import React, {useEffect, useState, useRef, createContext} from 'react'\nimport './MakePage.css'\nimport './MakeLanding.css'\n\n// Recoil , Immer JS ì ìš©\n// \n\nimport { dbService } from '../../tools/fbase';\nimport { stService } from '../../tools/fbase';\nimport {Link} from 'react-router-dom';\nimport NewSection from '../../components/Make/NewSection'\nimport NewSectionMake from '../../components/Make/Edit/NewSectionMake'\nimport EditSetting from '../../components/Make/Edit/NavFooterSetting/EditSetting'\nimport NavBarInMakePage from './NavBarInMakePage/NavBarInMakePage'\nimport MakeNavigationV2 from '../../components/Make/NavBar/MakeNavigationV2'\nimport MakeFooterV2 from '../../components/Make/Footer/MakeFooterV2'\nimport FirstQuestions from '../Questions/FirstQuestions'\nimport LoadingModal from '../../components/Make/Modal/LoadingModal'\nimport OverflowScrolling from 'react-overflow-scrolling';\nimport { v4 as uuidv4 } from 'uuid';\nimport { useLocation, useParams } from 'react-router';\nimport { base } from '../../components/Make/SectionTypes/baseTypes'\nimport ReactGa from 'react-ga'\nimport lodash from 'lodash'\nimport EditNaviSection from '../../components/Make/Edit/NavFooterSetting/EditNaviSection'\nimport EditFooterSection from '../../components/Make/Edit/NavFooterSetting/EditFooterSection'\nimport EditContents from '../../components/Make/Edit/NavFooterSetting/EditContents'\nimport ConfirmCustom from '../../tools/ConfirmCustom'\nimport {motion} from 'framer-motion'\nimport { isMobile } from 'react-device-detect';\n\nexport const MyContext = React.createContext({\n    state : {addingSectionAt : 1000},\n    action : {setAddingSectionAt : () => {}}\n});\n\nconst label = { inputProps: { 'aria-label': 'Switch demo' } };\n\nconst smallfont = `28px`;\nconst bigfont = '50px';\nconst rate = 0.63;\n\nconst NOTADDING = 1000;\n\nconst MakePageV2 = ({history, userObj}, props) => {\n    const targets = useRef(null);\n    // ë°ì´í„° ë² ì´ìŠ¤ì— ì €ì¥í•˜ì§€ ì•Šê³  ì œì‘ì„ ìœ„í•´ì„œë§Œ ì‚¬ìš©ë˜ëŠ” ê²ƒë“¤.\n    const [secNum, setSecNum] = useState(0); // í˜„ì¬ ìˆ˜ì •ì¤‘ì¸ í˜ì´ì§€ë¥¼ ì˜ë¯¸.\n    const [loading, setLoading] = useState(false);\n    const [open, setOpen] = useState(false); // ì²« ì§ˆë¬¸ì„ ìœ„í•œ Open\n\n    const [isPhone, setIsPhone] = useState(true);\n    const [full, setFull] = useState(false);\n    const [isWidget, setIsWidget] = useState(true);\n    const [password, setPassword] = useState(\"\");\n    const [nowState, setNowState] = useState('new');\n    const [load, setLoad] = useState(false);\n    const [editing, setEditing] = useState(false);\n    const location = useLocation();\n\n    // ë©”ì¸ ì„¸íŒ…\n    const [setting, setSetting] = useState({\n        urlId:'',\n        faviconAttachment:'',\n        font:'',\n        smallFont:'',\n        color:'',\n        fta:{\n            use:false,\n            backgroundColor:'rgba(150,150,0,1)',\n            text:'fta ë²„íŠ¼'\n        }\n    });\n\n    // ìƒˆë¡œìš´ ì„¸íŒ…\n    const [contents, setContents] = useState([ lodash.cloneDeep(base[0]), lodash.cloneDeep(base[1]), lodash.cloneDeep(base[2]), lodash.cloneDeep(base[4]) ])\n\n    // ë„¤ë¹„ê²Œì´ì…˜\n    const [navi, setNavi] = useState({\n        sectionTemplateNumber:1,\n        use:true,\n        title:'Surfee',\n        fixed:false,\n        isLogo:'logo',\n        logo:'',\n        backgroundColor:'rgba(0,0,0,0)', \n        bottomBorder:false,\n        button:{\n            use:true,\n            func:'link',\n            templateNum:1,\n            link:'www.naver.com',\n            title:'ì‹ ì²­í•˜ê¸°',\n            color:'rgba(0,0,0,0.4)',\n        }\n    });\n\n    // í‘¸í„°\n    const [foot, setFoot] = useState({\n        sectionTemplateNumber:1,\n        use:true,\n        backgroundColor:'white', \n        padding:1,\n        text:\"<p style=\\\"text-align:center;\\\">About Us - Contact Us - ê°œì¸ì •ë³´ ì²˜ë¦¬ë°©ì¹¨ - íŒ€ ì†Œê°œ</p><p style=\\\"text-align:center;\\\">E-mail : surfee.business@gmail.com</p><p style=\\\"text-align:center;\\\"><strong>2021 Copyright Â© , All rights reserved</strong></p>\",\n        iconUse:true,\n        iconStyle:'circle',\n        iconColor:'white',\n        iconAlign:'start',\n        icons:[\n            \n        ],\n        second:{\n            text:'<p>ë‘ë²ˆ ì§¸ ë‹¨ì…ë‹ˆë‹¤.</p>'\n        }\n    });\n\n    const [addingSectionAt, setAddingSectionAt] = useState(NOTADDING); // 1000ì€ ì¶”ê°€í•˜ê³  ìˆì§€ ì•Šë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸.\n\n    const [urlId, setUrlId] = useState(\"\");\n    // í‘¸í„°\n    const [footerOrNot, setFooterOrNot] = useState(false);\n\n    // ë°˜ë³µ ì‹¤í–‰ë˜ëŠ” useEffect\n    useEffect(() => {\n        // to report page view\n        // ReactGa.initialize('UA-213792742-1');\n        // ReactGa.pageview(`/making/${userObj.email}`);\n\n        function repeat(){\n            localStorage.setItem('temp', JSON.stringify([contents, navi, foot, setting]));\n        }\n        // 30ì´ˆì— í•œë²ˆ ì”© ìë™ ì €ì¥\n        let id = setInterval(repeat, 30000);\n        return () => clearInterval(id);\n    })\n\n    // ì²˜ìŒì— í•œë²ˆë§Œ ì‹¤í–‰ë˜ëŠ” useEffect\n    useEffect(() => {\n        \n        // ê´€ë¦¬í•˜ê¸° í˜ì´ì§€ì—ì„œ state.itemìœ¼ë¡œ ë‚´ìš©ì„ ê°€ì§€ê³  ë„˜ì–´ì™”ë‹¤.\n        if(location.state !== undefined){\n\n            const arr = location.pathname.split('/');\n            setNowState(arr[arr.length -1]);\n\n            const item = location.state.item;\n            setContents(item[0]);\n            setNavi(item[1]);\n            setFoot(item[2]);\n            setSetting(item[3]);\n            setOpen(false);\n            setEditing(true);\n        }else{\n            // ë¡œì»¬ìŠ¤í† ë¦¬ì§€ì— ì €ì¥ë˜ì–´ì¸ê²Œ ìˆë‹¤ë©´\n            if(localStorage.getItem('temp') !== null){\n                \n                // const cf = window.confirm(\"ì‘ì—…ì¤‘ì´ë˜ í˜ì´ì§€ê°€ ìˆìŠµë‹ˆë‹¤. ë¶ˆëŸ¬ì˜¤ì‹œê² ìŠµë‹ˆê¹Œ? ì·¨ì†Œ ì‹œ ì´ì „ì— ì‘ì—…í•˜ë˜ ë‚´ìš©ì€ ì‚¬ë¼ì§‘ë‹ˆë‹¤.\");\n\n                setFooterOrNot(true);\n\n                // if(cf){\n                //     const temp = JSON.parse(localStorage.getItem('temp'));\n                //     setContents(temp[0]);\n                //     setNavi(temp[1]);\n                //     setFoot(temp[2]);\n                //     setSetting(temp[3]);\n                //     setOpen(false);\n                //     setEditing(true);\n                // }else{\n                // }\n            }else{\n                localStorage.setItem('temp', JSON.stringify([contents, navi, foot, setting]));\n            }\n        }\n\n        setLoad(true);\n    },[])\n\n    const contextValue = {\n        state: {addingSectionAt, secNum, contents, isPhone},\n        action : {setAddingSectionAt, setSecNum, setContents, setIsPhone},\n    }\n\n    const loadLocalStorage = () => {\n        const temp = JSON.parse(localStorage.getItem('temp'));\n        setContents(temp[0]);\n        setNavi(temp[1]);\n        setFoot(temp[2]);\n        setSetting(temp[3]);\n        setOpen(false);\n        setEditing(true);\n    }\n\n    const doSave = async () => {\n        // ì €ì¥í•˜ê¸°\n        if(password.length < 4){\n            alert(\"4ê¸€ì ì´ìƒ ì…ë ¥í•´ì£¼ì‹œê¸° ë°”ëë‹ˆë‹¤.\");\n            return;\n        }else{\n            setLoading(true);\n            const checkDatas = await dbService\n                .collection(\"apply-landing\")\n                .where(\"password\", \"==\", password)\n                .get(); // uidë¥¼ creatorIdë¡œ ì¤¬ì—ˆìœ¼ë‹ˆê¹Œ.\n            let checkData = checkDatas.docs.map(doc => {\n                return({...doc.data(), id:doc.id})\n            });\n\n            const attachmentRef = stService.ref().child(`${urlId}/${uuidv4()}`)\n\n            const oneLandingPage = {\n\n            }\n\n            if(checkData.length === 0){\n                // ì—†ìœ¼ë©´ ìƒˆë¡œ ì €ì¥\n                await dbService.collection(\"apply-landing\").add(oneLandingPage);\n                alert(\"ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!\");\n                setLoading(false);\n                return;\n            }else{\n                // ìˆìœ¼ë©´ ì—…ë°ì´íŠ¸                \n                await dbService.doc(`apply-landing/${checkData[0].id}`)\n                .update(oneLandingPage)\n                alert(\"ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!\");\n                setLoading(false);\n                return;\n            }\n        }\n    }\n\n    const doLoad = async () => {\n        setLoading(true);\n        const checkDatas = await dbService\n            .collection(\"apply-landing\")\n            .where(\"password\", \"==\", password)\n            .get(); // uidë¥¼ creatorIdë¡œ ì¤¬ì—ˆìœ¼ë‹ˆê¹Œ.\n        let checkData = checkDatas.docs.map(doc => {\n            return({...doc.data(), id:doc.id})\n        });\n\n        if(checkData.length === 0){\n            alert(\"í•´ë‹¹í•˜ëŠ” ë¶ˆëŸ¬ì˜¤ê¸° ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤!\");\n            return;\n        }else{\n\n        }\n    }\n\n    const selectorTable = () => {\n        // 50ì€ ë‚´ë¹„ë¥¼ ì˜ë¯¸, 51ì€ í‘¸í„°ë¥¼ ì˜ë¯¸, 52ëŠ” ê¸°ë³¸ì„¸íŒ…ì„ ì˜ë¯¸\n        return(\n            <NewSectionMake content={contents[secNum]} foot={foot} setFoot={setFoot} navi={navi} setNavi={setNavi} setting={setting} setSetting={setSetting} />\n        )\n    }\n\n    const sectionsReturn = contents.map((item, index) => {\n        return(\n            <div style={{width:'100%'}}>\n                <NewSection content={item} index={index} setSecNum={setSecNum} contents={contents} setContents={setContents}/>\n            </div>\n        )\n    })\n\n    const backgroundClick = e => {\n        // if(e.target.className === \"make-left-landing\" || e.target.className === \"for-section-hover\"){\n        //     setSecNum(CONTENTSSECNUM)\n        //     setAddingSectionAt(NOTADDING);\n        // }\n        // else{\n        //     return;\n        // }\n    }\n\n    return (<>\n    { isMobile ? \n        <div className=\"mobile-hide\">\n            <div>\n                ë³¸ ì‚¬ì´íŠ¸ëŠ” PCí™˜ê²½ì— ìµœì í™”ë˜ì–´ìˆìŠµë‹ˆë‹¤. <br />\n                PCë¡œ ì´ë™í•´ì„œ ëœë”©í˜ì´ì§€ ì œì‘ì„ ì‹œì‘í•´ë³´ì„¸ìš”. ğŸ˜\n            </div>\n        </div> \n        :\n    <>\n       <MyContext.Provider value={contextValue}>\n            <NavBarInMakePage \n                doLoad={doLoad} history={history} userObj={userObj}\n                open={open} setOpen={setOpen}\n                full={full} setFull={setFull}\n                isPhone={isPhone} setIsPhone={setIsPhone} doSave={doSave}\n                nowState={nowState}\n                loading={loading} setLoading={setLoading}\n                navi={navi} foot={foot} setting={setting}\n            />\n            <div className=\"make-page-container\" style={{marginTop:'0px'}}>\n                {/* ì•„ë˜ëŠ” ì œì‘í•˜ëŠ” ê³³ */}\n                <div style={{display:'flex', justifyContent:'center', alignItems: 'center'}}>\n                    <div className=\"make-page-make-space\" style={{display:`${full ? 'none' : 'flex'}`}}>\n                        <OverflowScrolling className='overflow-scrolling'>\n                            {/* ì œì‘í˜ì´ì§€ ë©”ì¸ */}\n                            {selectorTable()}\n                        </OverflowScrolling>\n                    </div>\n                    <div className=\"fake-make\">\n                    </div>\n                </div>\n                {/* ì•„ë˜ëŠ” ë¯¸ë¦¬ë³´ê¸° í™”ë©´ */}\n                <div className=\"make-left-landing\" onClick={e => backgroundClick(e)}>\n                    <motion.div className=\"scroll-container\" \n                        style={{ width:`${full ? '100%' :'90%'}`}}\n                        animate={\n                            isPhone ? {\n                                width:['80%', '40%'],\n                                transition:{\n                                    duration:0.3\n                                }\n                            } : {}\n                        }>\n                        {/* ì‹¤ì‹œê°„ìœ¼ë¡œ ë°”ë€ŒëŠ” ëª¨ìŠµì´ ë³´ì´ëŠ” ëœë”©í˜ì´ì§€ */}\n                        <div ref={targets} className=\"make-main-page-container\" style={{fontSize:`${full ? `${bigfont}` : `${smallfont}`}`, borderRadius:`${isPhone ? '7px' : '0px'}` }}>  \n                            \n                            {/* ë„¤ë¹„ê²Œì´ì…˜ */}\n                            {navi.use && <MakeNavigationV2 full={full} navi={navi} setNavi={setNavi} history={history} /> }\n                            \n                            {/* ì„¹ì…˜ ë””ìŠ¤í”Œë ˆì´ */}\n                            \n                            {sectionsReturn}\n\n                            {/* í‘¸í„° */}\n                            {foot.use && <MakeFooterV2 full={full} history={history} foot={foot} setFoot={setFoot} /> }                             \n\n                            { ( setting.fta.use && targets.current ) &&\n                                <button className=\"fta-button\" style={{backgroundColor:`${setting.fta.backgroundColor}`, width:`${isPhone ? 300 : 600}px`}}>\n                                    {setting.fta.text}\n                                </button>\n                            }\n                        </div>\n                    </motion.div>\n                </div>\n            </div>\n            \n            {/* ëª¨ë‹¬ ëª¨ì•„ë‘ê¸° */}\n            <div style={{display: 'flex', width:'80%', justifyContent: 'center', alignItems:'center', marginTop:'10%', position:'absolute', bottom:'70px'}}>\n                <FirstQuestions open={open} setOpen={setOpen} navi={navi} setNavi={setNavi} editing={editing} setEditing={setEditing} setting={setting} setSetting={setSetting}/>\n                <LoadingModal loading={loading} />\n            </div>\n            <ConfirmCustom open={footerOrNot} setOpen={setFooterOrNot} message={\"ì œì‘ ì¤‘ì´ë˜ í˜ì´ì§€ê°€ ìˆìŠµë‹ˆë‹¤. ë¶ˆëŸ¬ì˜¤ì‹œê² ìŠµë‹ˆê¹Œ? ì·¨ì†Œ ì‹œ ì´ì „ì— ì‘ì—…í•˜ë˜ ë‚´ìš©ì€ ì‚¬ë¼ì§‘ë‹ˆë‹¤.\"} callback={ loadLocalStorage } />\n        </MyContext.Provider>\n        </> }\n        </>)\n}\n\nexport default MakePageV2\n"]},"metadata":{},"sourceType":"module"}