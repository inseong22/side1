{"ast":null,"code":"/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module alignment/alignmentediting\n */\nimport { Plugin } from 'ckeditor5/src/core';\nimport AlignmentCommand from './alignmentcommand';\nimport { isDefault, isSupported, normalizeAlignmentOptions, supportedOptions } from './utils';\n/**\n * The alignment editing feature. It introduces the {@link module:alignment/alignmentcommand~AlignmentCommand command} and adds\n * the `alignment` attribute for block elements in the {@link module:engine/model/model~Model model}.\n * @extends module:core/plugin~Plugin\n */\n\nexport default class AlignmentEditing extends Plugin {\n  /**\n   * @inheritDoc\n   */\n  static get pluginName() {\n    return 'AlignmentEditing';\n  }\n  /**\n   * @inheritDoc\n   */\n\n\n  constructor(editor) {\n    super(editor);\n    editor.config.define('alignment', {\n      options: [...supportedOptions.map(option => ({\n        name: option\n      }))]\n    });\n  }\n  /**\n   * @inheritDoc\n   */\n\n\n  init() {\n    const editor = this.editor;\n    const locale = editor.locale;\n    const schema = editor.model.schema;\n    const options = normalizeAlignmentOptions(editor.config.get('alignment.options')); // Filter out unsupported options and those that are redundant, e.g. `left` in LTR / `right` in RTL mode.\n\n    const optionsToConvert = options.filter(option => isSupported(option.name) && !isDefault(option.name, locale)); // Once there is at least one `className` defined, we switch to alignment with classes.\n\n    const shouldUseClasses = optionsToConvert.some(option => !!option.className); // Allow alignment attribute on all blocks.\n\n    schema.extend('$block', {\n      allowAttributes: 'alignment'\n    });\n    editor.model.schema.setAttributeProperties('alignment', {\n      isFormatting: true\n    });\n\n    if (shouldUseClasses) {\n      editor.conversion.attributeToAttribute(buildClassDefinition(optionsToConvert));\n    } else {\n      // Downcast inline styles.\n      editor.conversion.for('downcast').attributeToAttribute(buildDowncastInlineDefinition(optionsToConvert));\n    }\n\n    const upcastInlineDefinitions = buildUpcastInlineDefinitions(optionsToConvert); // Always upcast from inline styles.\n\n    for (const definition of upcastInlineDefinitions) {\n      editor.conversion.for('upcast').attributeToAttribute(definition);\n    }\n\n    const upcastCompatibilityDefinitions = buildUpcastCompatibilityDefinitions(optionsToConvert); // Always upcast from deprecated `align` attribute.\n\n    for (const definition of upcastCompatibilityDefinitions) {\n      editor.conversion.for('upcast').attributeToAttribute(definition);\n    }\n\n    editor.commands.add('alignment', new AlignmentCommand(editor));\n  }\n\n} // Prepare downcast conversion definition for inline alignment styling.\n// @private\n\nfunction buildDowncastInlineDefinition(options) {\n  const definition = {\n    model: {\n      key: 'alignment',\n      values: options.map(option => option.name)\n    },\n    view: {}\n  };\n\n  for (const {\n    name\n  } of options) {\n    definition.view[name] = {\n      key: 'style',\n      value: {\n        'text-align': name\n      }\n    };\n  }\n\n  return definition;\n} // Prepare upcast definitions for inline alignment styles.\n// @private\n\n\nfunction buildUpcastInlineDefinitions(options) {\n  const definitions = [];\n\n  for (const {\n    name\n  } of options) {\n    definitions.push({\n      view: {\n        key: 'style',\n        value: {\n          'text-align': name\n        }\n      },\n      model: {\n        key: 'alignment',\n        value: name\n      }\n    });\n  }\n\n  return definitions;\n} // Prepare upcast definitions for deprecated `align` attribute.\n// @private\n\n\nfunction buildUpcastCompatibilityDefinitions(options) {\n  const definitions = [];\n\n  for (const {\n    name\n  } of options) {\n    definitions.push({\n      view: {\n        key: 'align',\n        value: name\n      },\n      model: {\n        key: 'alignment',\n        value: name\n      }\n    });\n  }\n\n  return definitions;\n} // Prepare conversion definitions for upcast and downcast alignment with classes.\n// @private\n\n\nfunction buildClassDefinition(options) {\n  const definition = {\n    model: {\n      key: 'alignment',\n      values: options.map(option => option.name)\n    },\n    view: {}\n  };\n\n  for (const option of options) {\n    definition.view[option.name] = {\n      key: 'class',\n      value: option.className\n    };\n  }\n\n  return definition;\n}\n/**\n * The alignment configuration format descriptor.\n *\n *\t\tconst alignmentFormat = {\n *\t\t\tname: 'right',\n *\t\t\tclassName: 'my-align-right-class'\n *\t\t}\n *\n * @typedef {Object} module:alignment/alignmentediting~AlignmentFormat\n *\n * @property {'left'|'right'|'center'|'justify'} name One of the alignment names options.\n *\n * @property {String} className The CSS class used to represent the style in the view.\n * Used to override default, inline styling for alignment.\n */","map":{"version":3,"sources":["/Users/oyejin/Surfee/kiwi/node_modules/@ckeditor/ckeditor5-alignment/src/alignmentediting.js"],"names":["Plugin","AlignmentCommand","isDefault","isSupported","normalizeAlignmentOptions","supportedOptions","AlignmentEditing","pluginName","constructor","editor","config","define","options","map","option","name","init","locale","schema","model","get","optionsToConvert","filter","shouldUseClasses","some","className","extend","allowAttributes","setAttributeProperties","isFormatting","conversion","attributeToAttribute","buildClassDefinition","for","buildDowncastInlineDefinition","upcastInlineDefinitions","buildUpcastInlineDefinitions","definition","upcastCompatibilityDefinitions","buildUpcastCompatibilityDefinitions","commands","add","key","values","view","value","definitions","push"],"mappings":"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","sourcesContent":["/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module alignment/alignmentediting\n */\n\nimport { Plugin } from 'ckeditor5/src/core';\n\nimport AlignmentCommand from './alignmentcommand';\nimport { isDefault, isSupported, normalizeAlignmentOptions, supportedOptions } from './utils';\n\n/**\n * The alignment editing feature. It introduces the {@link module:alignment/alignmentcommand~AlignmentCommand command} and adds\n * the `alignment` attribute for block elements in the {@link module:engine/model/model~Model model}.\n * @extends module:core/plugin~Plugin\n */\nexport default class AlignmentEditing extends Plugin {\n\t/**\n\t * @inheritDoc\n\t */\n\tstatic get pluginName() {\n\t\treturn 'AlignmentEditing';\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tconstructor( editor ) {\n\t\tsuper( editor );\n\n\t\teditor.config.define( 'alignment', {\n\t\t\toptions: [ ...supportedOptions.map( option => ( { name: option } ) ) ]\n\t\t} );\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tinit() {\n\t\tconst editor = this.editor;\n\t\tconst locale = editor.locale;\n\t\tconst schema = editor.model.schema;\n\n\t\tconst options = normalizeAlignmentOptions( editor.config.get( 'alignment.options' ) );\n\n\t\t// Filter out unsupported options and those that are redundant, e.g. `left` in LTR / `right` in RTL mode.\n\t\tconst optionsToConvert = options.filter(\n\t\t\toption => isSupported( option.name ) && !isDefault( option.name, locale )\n\t\t);\n\n\t\t// Once there is at least one `className` defined, we switch to alignment with classes.\n\t\tconst shouldUseClasses = optionsToConvert.some( option => !!option.className );\n\n\t\t// Allow alignment attribute on all blocks.\n\t\tschema.extend( '$block', { allowAttributes: 'alignment' } );\n\t\teditor.model.schema.setAttributeProperties( 'alignment', { isFormatting: true } );\n\n\t\tif ( shouldUseClasses ) {\n\t\t\teditor.conversion.attributeToAttribute( buildClassDefinition( optionsToConvert ) );\n\t\t} else {\n\t\t\t// Downcast inline styles.\n\t\t\teditor.conversion.for( 'downcast' ).attributeToAttribute( buildDowncastInlineDefinition( optionsToConvert ) );\n\t\t}\n\n\t\tconst upcastInlineDefinitions = buildUpcastInlineDefinitions( optionsToConvert );\n\n\t\t// Always upcast from inline styles.\n\t\tfor ( const definition of upcastInlineDefinitions ) {\n\t\t\teditor.conversion.for( 'upcast' ).attributeToAttribute( definition );\n\t\t}\n\n\t\tconst upcastCompatibilityDefinitions = buildUpcastCompatibilityDefinitions( optionsToConvert );\n\n\t\t// Always upcast from deprecated `align` attribute.\n\t\tfor ( const definition of upcastCompatibilityDefinitions ) {\n\t\t\teditor.conversion.for( 'upcast' ).attributeToAttribute( definition );\n\t\t}\n\n\t\teditor.commands.add( 'alignment', new AlignmentCommand( editor ) );\n\t}\n}\n\n// Prepare downcast conversion definition for inline alignment styling.\n// @private\nfunction buildDowncastInlineDefinition( options ) {\n\tconst definition = {\n\t\tmodel: {\n\t\t\tkey: 'alignment',\n\t\t\tvalues: options.map( option => option.name )\n\t\t},\n\t\tview: {}\n\t};\n\n\tfor ( const { name } of options ) {\n\t\tdefinition.view[ name ] = {\n\t\t\tkey: 'style',\n\t\t\tvalue: {\n\t\t\t\t'text-align': name\n\t\t\t}\n\t\t};\n\t}\n\n\treturn definition;\n}\n\n// Prepare upcast definitions for inline alignment styles.\n// @private\nfunction buildUpcastInlineDefinitions( options ) {\n\tconst definitions = [];\n\n\tfor ( const { name } of options ) {\n\t\tdefinitions.push( {\n\t\t\tview: {\n\t\t\t\tkey: 'style',\n\t\t\t\tvalue: {\n\t\t\t\t\t'text-align': name\n\t\t\t\t}\n\t\t\t},\n\t\t\tmodel: {\n\t\t\t\tkey: 'alignment',\n\t\t\t\tvalue: name\n\t\t\t}\n\t\t} );\n\t}\n\n\treturn definitions;\n}\n\n// Prepare upcast definitions for deprecated `align` attribute.\n// @private\nfunction buildUpcastCompatibilityDefinitions( options ) {\n\tconst definitions = [];\n\n\tfor ( const { name } of options ) {\n\t\tdefinitions.push( {\n\t\t\tview: {\n\t\t\t\tkey: 'align',\n\t\t\t\tvalue: name\n\t\t\t},\n\t\t\tmodel: {\n\t\t\t\tkey: 'alignment',\n\t\t\t\tvalue: name\n\t\t\t}\n\t\t} );\n\t}\n\n\treturn definitions;\n}\n\n// Prepare conversion definitions for upcast and downcast alignment with classes.\n// @private\nfunction buildClassDefinition( options ) {\n\tconst definition = {\n\t\tmodel: {\n\t\t\tkey: 'alignment',\n\t\t\tvalues: options.map( option => option.name )\n\t\t},\n\t\tview: {}\n\t};\n\n\tfor ( const option of options ) {\n\t\tdefinition.view[ option.name ] = {\n\t\t\tkey: 'class',\n\t\t\tvalue: option.className\n\t\t};\n\t}\n\n\treturn definition;\n}\n\n/**\n * The alignment configuration format descriptor.\n *\n *\t\tconst alignmentFormat = {\n *\t\t\tname: 'right',\n *\t\t\tclassName: 'my-align-right-class'\n *\t\t}\n *\n * @typedef {Object} module:alignment/alignmentediting~AlignmentFormat\n *\n * @property {'left'|'right'|'center'|'justify'} name One of the alignment names options.\n *\n * @property {String} className The CSS class used to represent the style in the view.\n * Used to override default, inline styling for alignment.\n */\n"]},"metadata":{},"sourceType":"module"}