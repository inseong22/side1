{"ast":null,"code":"var _jsxFileName = \"/Users/oyejin/Surfee/kiwi/src/pages/Login/Register/RegisterPage.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { authService } from '../../../tools/fbase';\nimport { firebaseInstance } from '../../../tools/fbase';\nimport { dbService } from '../../../tools/fbase';\nimport { Input } from 'antd';\nimport googlelogo from '../googlelogo.png';\nimport s1 from '../../../tools/img/surfee1.png';\nimport { Link } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction RegisterPage({\n  history\n}) {\n  _s();\n\n  const [id, setId] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [done, setDone] = useState(false);\n  const [name, setName] = useState(\"\");\n  const [job, setJob] = useState(\"\");\n\n  const socialLogin = async e => {\n    const {\n      target: {\n        name\n      }\n    } = e;\n    let provider;\n\n    if (name === \"googleLogin\") {\n      provider = new firebaseInstance.auth.GoogleAuthProvider();\n    } else {\n      console.log(\"이건 뜨면 안되는 메세지.\");\n    }\n\n    const data = await authService.signInWithPopup(provider);\n    await checkRegister(data.user.multiFactor.user.email);\n    setDone(true);\n    console.log(data.user.multiFactor.user, \"로그인\");\n  };\n\n  const submit = async e => {\n    var data = '';\n    e.preventDefault();\n\n    try {\n      data = await authService.createUserWithEmailAndPassword(id, password);\n      console.log(data);\n    } catch (err) {\n      if (err.code === \"auth/email-already-in-use\") {\n        alert(\"이미 존재하는 아이디입니다. 로그인 해주세요.\");\n        history.push('/#/login');\n        history.go();\n      } else if (err.code === \"auth/invalid-email\") {\n        alert(\"이메일 양식에 맞게 작성해주세요.\");\n      } else {\n        alert(\"옳바르지 않은 회원가입 시도입니다.\");\n      }\n\n      return;\n    }\n\n    history.push('/');\n    history.go();\n  };\n\n  const checkRegister = async email => {\n    const usersCollections = await dbService.collection(\"users\").where(\"email\", \"==\", email).get();\n    const usersExist = usersCollections.docs.map(doc => {\n      return { ...doc.data(),\n        id: doc.id\n      };\n    });\n\n    if (usersExist.length === 0) {\n      // 구글 아이디로 로그인했는데 회원가입에 정보가 없을 때\n      console.log(\"회원가입 정보를 받습니다.\");\n    }\n  };\n\n  const submitInfo = async () => {\n    await dbService.collection(\"users\").add({\n      name: name,\n      job: job\n    });\n    alert(\"회원가입이 완료되었습니다.\");\n    history.push('/');\n    history.go();\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: done ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"login-container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"login__inner\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: \"\\uD68C\\uC6D0\\uAC00\\uC785 \\uD398\\uC774\\uC9C0\\uC5D0 \\uC624\\uC2E0 \\uAC83\\uC744 \\uD658\\uC601\\uD569\\uB2C8\\uB2E4.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          className: \"form-container\",\n          onSubmit: e => submitInfo(e),\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"\\uC774\\uB984\\uC744 \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694.\",\n            required: true,\n            value: name,\n            onChange: e => setName(e.currentTarget.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"\\uC9C1\\uC5C5\\uC744 \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694.\",\n            required: true,\n            value: job,\n            onChange: e => setJob(e.currentTarget.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"submit\",\n            value: \"\\uD68C\\uC6D0\\uAC00\\uC785 \\uC644\\uB8CC\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"login-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"login-container__container\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"login__inner\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"login-title\",\n            style: {\n              color: '#6a63f7'\n            },\n            children: \"Surfee\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"login-title\",\n            children: \"\\uD68C\\uC6D0\\uAC00\\uC785 \\uD398\\uC774\\uC9C0\\uC5D0 \\uC624\\uC2E0 \\uAC83\\uC744 \\uD658\\uC601\\uD569\\uB2C8\\uB2E4.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n            onSubmit: e => submit(e),\n            className: \"center\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"login-label\",\n              children: \"Email\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 124,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(Input, {\n              type: \"text\",\n              className: \"login-input\",\n              placeholder: \"\\uC544\\uC774\\uB514\\uB97C \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694.\",\n              required: true,\n              value: id,\n              onChange: e => setId(e.currentTarget.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 127,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"login-label\",\n              children: \"Password\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 135,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(Input, {\n              type: \"password\",\n              className: \"login-input\",\n              placeholder: \"\\uBE44\\uBC00\\uBC88\\uD638\\uB97C \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694.\",\n              required: true,\n              value: password,\n              onChange: e => setPassword(e.currentTarget.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 138,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(Input, {\n              className: \"login-form-button\",\n              type: \"submit\",\n              value: \"\\uD68C\\uC6D0\\uAC00\\uC785\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 146,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"google-login-button\",\n            onClick: e => socialLogin(e),\n            style: {\n              marginTop: '2%'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: googlelogo,\n              width: 20\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 149,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                marginLeft: '5%'\n              },\n              children: \"\\uAD6C\\uAE00 \\uD68C\\uC6D0\\uAC00\\uC785\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 150,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 148,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              padding: '2% 0%',\n              justifyContent: 'flex-start',\n              display: 'flex',\n              width: '100%'\n            },\n            children: [/*#__PURE__*/_jsxDEV(Link, {\n              to: \"/customer\",\n              className: \"footer-text-click\",\n              children: \"\\uAC1C\\uC778\\uC815\\uBCF4 \\uCC98\\uB9AC\\uBC29\\uCE68\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 153,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(Link, {\n              to: \"/customer\",\n              className: \"footer-text-click\",\n              style: {\n                marginLeft: '2%'\n              },\n              children: \"\\uC774\\uC6A9\\uC57D\\uAD00\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 156,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"login-background\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: s1,\n          width: 600\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"login-background__desc\",\n          style: {\n            fontFamily: 'Pretendard-ExtraBold',\n            marginTop: '2%'\n          },\n          children: \"Surfee\\uC640 \\uD568\\uAED8 1\\uBD84\\uB9CC\\uC5D0 \\uC644\\uC131\\uD558\\uB294 \\uB79C\\uB529\\uD398\\uC774\\uC9C0\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"login-background__desc\",\n          children: \"Surfee\\uC640 \\uD568\\uAED8 1\\uBD84\\uB9CC\\uC5D0 \\uC644\\uC131\\uD558\\uB294 \\uB79C\\uB529\\uD398\\uC774\\uC9C0\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 9\n    }, this)\n  }, void 0, false);\n}\n\n_s(RegisterPage, \"aPXL8PqQHQiAwX2OZqZtxpWtLcw=\");\n\n_c = RegisterPage;\nexport default RegisterPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"RegisterPage\");","map":{"version":3,"sources":["/Users/oyejin/Surfee/kiwi/src/pages/Login/Register/RegisterPage.js"],"names":["React","useState","useEffect","authService","firebaseInstance","dbService","Input","googlelogo","s1","Link","RegisterPage","history","id","setId","password","setPassword","done","setDone","name","setName","job","setJob","socialLogin","e","target","provider","auth","GoogleAuthProvider","console","log","data","signInWithPopup","checkRegister","user","multiFactor","email","submit","preventDefault","createUserWithEmailAndPassword","err","code","alert","push","go","usersCollections","collection","where","get","usersExist","docs","map","doc","length","submitInfo","add","currentTarget","value","color","marginTop","marginLeft","padding","justifyContent","display","width","fontFamily"],"mappings":";;;AAAA,OAAOA,KAAP,IAAeC,QAAf,EAAyBC,SAAzB,QAAyC,OAAzC;AACA,SAASC,WAAT,QAA4B,sBAA5B;AACA,SAASC,gBAAT,QAAiC,sBAAjC;AACA,SAASC,SAAT,QAA0B,sBAA1B;AACA,SAASC,KAAT,QAAsB,MAAtB;AACA,OAAOC,UAAP,MAAuB,mBAAvB;AACA,OAAOC,EAAP,MAAe,gCAAf;AACA,SAAQC,IAAR,QAAmB,kBAAnB;;;;AAEA,SAASC,YAAT,CAAsB;AAACC,EAAAA;AAAD,CAAtB,EAAiC;AAAA;;AAC7B,QAAM,CAACC,EAAD,EAAKC,KAAL,IAAcZ,QAAQ,CAAC,EAAD,CAA5B;AACA,QAAM,CAACa,QAAD,EAAWC,WAAX,IAA0Bd,QAAQ,CAAC,EAAD,CAAxC;AACA,QAAM,CAACe,IAAD,EAAOC,OAAP,IAAkBhB,QAAQ,CAAC,KAAD,CAAhC;AACA,QAAM,CAACiB,IAAD,EAAOC,OAAP,IAAkBlB,QAAQ,CAAC,EAAD,CAAhC;AACA,QAAM,CAACmB,GAAD,EAAMC,MAAN,IAAgBpB,QAAQ,CAAC,EAAD,CAA9B;;AAEA,QAAMqB,WAAW,GAAG,MAAOC,CAAP,IAAa;AAC7B,UAAM;AACFC,MAAAA,MAAM,EAAG;AAAEN,QAAAA;AAAF;AADP,QAEFK,CAFJ;AAGA,QAAIE,QAAJ;;AACA,QAAIP,IAAI,KAAK,aAAb,EAA2B;AACvBO,MAAAA,QAAQ,GAAG,IAAIrB,gBAAgB,CAACsB,IAAjB,CAAsBC,kBAA1B,EAAX;AACH,KAFD,MAEK;AACDC,MAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ;AACH;;AAED,UAAMC,IAAI,GAAG,MAAM3B,WAAW,CAAC4B,eAAZ,CAA4BN,QAA5B,CAAnB;AACA,UAAMO,aAAa,CAACF,IAAI,CAACG,IAAL,CAAUC,WAAV,CAAsBD,IAAtB,CAA2BE,KAA5B,CAAnB;AACAlB,IAAAA,OAAO,CAAC,IAAD,CAAP;AAEAW,IAAAA,OAAO,CAACC,GAAR,CAAYC,IAAI,CAACG,IAAL,CAAUC,WAAV,CAAsBD,IAAlC,EAAwC,KAAxC;AACH,GAhBD;;AAkBA,QAAMG,MAAM,GAAG,MAAOb,CAAP,IAAa;AACxB,QAAIO,IAAI,GAAG,EAAX;AACAP,IAAAA,CAAC,CAACc,cAAF;;AACA,QAAG;AACCP,MAAAA,IAAI,GAAG,MAAM3B,WAAW,CAACmC,8BAAZ,CACT1B,EADS,EACLE,QADK,CAAb;AAGAc,MAAAA,OAAO,CAACC,GAAR,CAAYC,IAAZ;AACH,KALD,CAKE,OAAOS,GAAP,EAAW;AACT,UAAGA,GAAG,CAACC,IAAJ,KAAa,2BAAhB,EAA4C;AACxCC,QAAAA,KAAK,CAAC,2BAAD,CAAL;AACA9B,QAAAA,OAAO,CAAC+B,IAAR,CAAa,UAAb;AACA/B,QAAAA,OAAO,CAACgC,EAAR;AACH,OAJD,MAIM,IAAGJ,GAAG,CAACC,IAAJ,KAAa,oBAAhB,EAAqC;AACvCC,QAAAA,KAAK,CAAC,oBAAD,CAAL;AACH,OAFK,MAED;AACDA,QAAAA,KAAK,CAAC,qBAAD,CAAL;AACH;;AACD;AACH;;AACD9B,IAAAA,OAAO,CAAC+B,IAAR,CAAa,GAAb;AACA/B,IAAAA,OAAO,CAACgC,EAAR;AACH,GAtBD;;AAwBA,QAAMX,aAAa,GAAG,MAAOG,KAAP,IAAiB;AACnC,UAAMS,gBAAgB,GAAG,MAAMvC,SAAS,CACnCwC,UAD0B,CACf,OADe,EAE1BC,KAF0B,CAEpB,OAFoB,EAEX,IAFW,EAELX,KAFK,EAG1BY,GAH0B,EAA/B;AAKA,UAAMC,UAAU,GAAGJ,gBAAgB,CAACK,IAAjB,CAAsBC,GAAtB,CAA0BC,GAAG,IAAI;AAChD,aAAO,EAAC,GAAGA,GAAG,CAACrB,IAAJ,EAAJ;AAAgBlB,QAAAA,EAAE,EAAEuC,GAAG,CAACvC;AAAxB,OAAP;AACH,KAFkB,CAAnB;;AAIA,QAAGoC,UAAU,CAACI,MAAX,KAAsB,CAAzB,EAA2B;AACvB;AACAxB,MAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ;AACH;AACJ,GAdD;;AAgBA,QAAMwB,UAAU,GAAG,YAAY;AAC3B,UAAMhD,SAAS,CAACwC,UAAV,CAAqB,OAArB,EAA8BS,GAA9B,CAAkC;AACpCpC,MAAAA,IAAI,EAACA,IAD+B;AAEpCE,MAAAA,GAAG,EAACA;AAFgC,KAAlC,CAAN;AAIAqB,IAAAA,KAAK,CAAC,gBAAD,CAAL;AACA9B,IAAAA,OAAO,CAAC+B,IAAR,CAAa,GAAb;AACA/B,IAAAA,OAAO,CAACgC,EAAR;AACH,GARD;;AAUA,sBACI;AAAA,cACC3B,IAAI,gBACL;AAAK,MAAA,SAAS,EAAC,iBAAf;AAAA,6BACI;AAAK,QAAA,SAAS,EAAC,cAAf;AAAA,gCACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADJ,eAII;AAAM,UAAA,SAAS,EAAC,gBAAhB;AAAiC,UAAA,QAAQ,EAAEO,CAAC,IAAI8B,UAAU,CAAC9B,CAAD,CAA1D;AAAA,kCACI;AACI,YAAA,IAAI,EAAC,MADT;AAEI,YAAA,WAAW,EAAC,0DAFhB;AAGI,YAAA,QAAQ,MAHZ;AAII,YAAA,KAAK,EAAEL,IAJX;AAKI,YAAA,QAAQ,EAAEK,CAAC,IAAIJ,OAAO,CAACI,CAAC,CAACgC,aAAF,CAAgBC,KAAjB;AAL1B;AAAA;AAAA;AAAA;AAAA,kBADJ,eAQI;AACI,YAAA,IAAI,EAAC,MADT;AAEI,YAAA,WAAW,EAAC,0DAFhB;AAGI,YAAA,QAAQ,MAHZ;AAII,YAAA,KAAK,EAAEpC,GAJX;AAKI,YAAA,QAAQ,EAAEG,CAAC,IAAIF,MAAM,CAACE,CAAC,CAACgC,aAAF,CAAgBC,KAAjB;AALzB;AAAA;AAAA;AAAA;AAAA,kBARJ,eAeI;AAAO,YAAA,IAAI,EAAC,QAAZ;AAAqB,YAAA,KAAK,EAAC;AAA3B;AAAA;AAAA;AAAA;AAAA,kBAfJ;AAAA;AAAA;AAAA;AAAA;AAAA,gBAJJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,YADK,gBA2BL;AAAK,MAAA,SAAS,EAAC,iBAAf;AAAA,8BACI;AAAK,QAAA,SAAS,EAAC,4BAAf;AAAA,+BACI;AAAK,UAAA,SAAS,EAAC,cAAf;AAAA,kCACI;AAAK,YAAA,SAAS,EAAC,aAAf;AAA6B,YAAA,KAAK,EAAE;AAACC,cAAAA,KAAK,EAAC;AAAP,aAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADJ,eAII;AAAK,YAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAJJ,eAOI;AAAM,YAAA,QAAQ,EAAElC,CAAC,IAAIa,MAAM,CAACb,CAAD,CAA3B;AAAgC,YAAA,SAAS,EAAC,QAA1C;AAAA,oCACI;AAAM,cAAA,SAAS,EAAC,aAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADJ,eAII,QAAC,KAAD;AACI,cAAA,IAAI,EAAC,MADT;AAEI,cAAA,SAAS,EAAC,aAFd;AAGI,cAAA,WAAW,EAAC,gEAHhB;AAII,cAAA,QAAQ,MAJZ;AAKI,cAAA,KAAK,EAAEX,EALX;AAMI,cAAA,QAAQ,EAAEW,CAAC,IAAIV,KAAK,CAACU,CAAC,CAACgC,aAAF,CAAgBC,KAAjB;AANxB;AAAA;AAAA;AAAA;AAAA,oBAJJ,eAYI;AAAM,cAAA,SAAS,EAAC,aAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAZJ,eAeI,QAAC,KAAD;AACI,cAAA,IAAI,EAAC,UADT;AAEI,cAAA,SAAS,EAAC,aAFd;AAGI,cAAA,WAAW,EAAC,sEAHhB;AAII,cAAA,QAAQ,MAJZ;AAKI,cAAA,KAAK,EAAE1C,QALX;AAMI,cAAA,QAAQ,EAAES,CAAC,IAAIR,WAAW,CAACQ,CAAC,CAACgC,aAAF,CAAgBC,KAAjB;AAN9B;AAAA;AAAA;AAAA;AAAA,oBAfJ,eAuBI,QAAC,KAAD;AAAO,cAAA,SAAS,EAAC,mBAAjB;AAAqC,cAAA,IAAI,EAAC,QAA1C;AAAmD,cAAA,KAAK,EAAC;AAAzD;AAAA;AAAA;AAAA;AAAA,oBAvBJ;AAAA;AAAA;AAAA;AAAA;AAAA,kBAPJ,eAgCI;AAAQ,YAAA,SAAS,EAAC,qBAAlB;AAAwC,YAAA,OAAO,EAAEjC,CAAC,IAAID,WAAW,CAACC,CAAD,CAAjE;AAAsE,YAAA,KAAK,EAAE;AAACmC,cAAAA,SAAS,EAAC;AAAX,aAA7E;AAAA,oCACI;AAAK,cAAA,GAAG,EAAEnD,UAAV;AAAsB,cAAA,KAAK,EAAE;AAA7B;AAAA;AAAA;AAAA;AAAA,oBADJ,eAEI;AAAM,cAAA,KAAK,EAAE;AAACoD,gBAAAA,UAAU,EAAC;AAAZ,eAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,kBAhCJ,eAoCI;AAAK,YAAA,KAAK,EAAE;AAACC,cAAAA,OAAO,EAAC,OAAT;AAAkBC,cAAAA,cAAc,EAAC,YAAjC;AAA+CC,cAAAA,OAAO,EAAC,MAAvD;AAA+DC,cAAAA,KAAK,EAAC;AAArE,aAAZ;AAAA,oCACI,QAAC,IAAD;AAAM,cAAA,EAAE,EAAC,WAAT;AAAqB,cAAA,SAAS,EAAC,mBAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADJ,eAII,QAAC,IAAD;AAAM,cAAA,EAAE,EAAC,WAAT;AAAqB,cAAA,SAAS,EAAC,mBAA/B;AAAmD,cAAA,KAAK,EAAE;AAACJ,gBAAAA,UAAU,EAAC;AAAZ,eAA1D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAJJ;AAAA;AAAA;AAAA;AAAA;AAAA,kBApCJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,cADJ,eAgDI;AAAK,QAAA,SAAS,EAAC,kBAAf;AAAA,gCACI;AAAK,UAAA,GAAG,EAAEnD,EAAV;AAAc,UAAA,KAAK,EAAE;AAArB;AAAA;AAAA;AAAA;AAAA,gBADJ,eAEI;AAAK,UAAA,SAAS,EAAC,wBAAf;AAAwC,UAAA,KAAK,EAAE;AAACwD,YAAAA,UAAU,EAAC,sBAAZ;AAAoCN,YAAAA,SAAS,EAAC;AAA9C,WAA/C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAFJ,eAKI;AAAK,UAAA,SAAS,EAAC,wBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBALJ;AAAA;AAAA;AAAA;AAAA;AAAA,cAhDJ;AAAA;AAAA;AAAA;AAAA;AAAA;AA5BA,mBADJ;AAyFH;;GApKQhD,Y;;KAAAA,Y;AAsKT,eAAeA,YAAf","sourcesContent":["import React, {useState, useEffect} from 'react'\nimport { authService } from '../../../tools/fbase'\nimport { firebaseInstance } from '../../../tools/fbase'\nimport { dbService } from '../../../tools/fbase'\nimport { Input } from 'antd';\nimport googlelogo from '../googlelogo.png'\nimport s1 from '../../../tools/img/surfee1.png';\nimport {Link} from 'react-router-dom';\n\nfunction RegisterPage({history}) {\n    const [id, setId] = useState(\"\");\n    const [password, setPassword] = useState(\"\");\n    const [done, setDone] = useState(false);\n    const [name, setName] = useState(\"\");\n    const [job, setJob] = useState(\"\");\n\n    const socialLogin = async (e) => {\n        const { \n            target : { name }, \n        } = e;\n        let provider;\n        if (name === \"googleLogin\"){\n            provider = new firebaseInstance.auth.GoogleAuthProvider();\n        }else{\n            console.log(\"이건 뜨면 안되는 메세지.\");\n        }\n\n        const data = await authService.signInWithPopup(provider);\n        await checkRegister(data.user.multiFactor.user.email);\n        setDone(true);\n\n        console.log(data.user.multiFactor.user, \"로그인\");\n    }\n\n    const submit = async (e) => {\n        var data = '';\n        e.preventDefault();\n        try{\n            data = await authService.createUserWithEmailAndPassword(\n                id, password\n            )\n            console.log(data)\n        } catch (err){\n            if(err.code === \"auth/email-already-in-use\"){\n                alert(\"이미 존재하는 아이디입니다. 로그인 해주세요.\");\n                history.push('/#/login');\n                history.go();\n            }else if(err.code === \"auth/invalid-email\"){\n                alert(\"이메일 양식에 맞게 작성해주세요.\");\n            }else{\n                alert(\"옳바르지 않은 회원가입 시도입니다.\");\n            }\n            return;\n        }\n        history.push('/');\n        history.go();\n    }\n\n    const checkRegister = async (email) => {\n        const usersCollections = await dbService\n            .collection(\"users\")\n            .where(\"email\", \"==\", email)\n            .get();\n        \n        const usersExist = usersCollections.docs.map(doc => {\n            return({...doc.data(), id: doc.id})\n        })\n\n        if(usersExist.length === 0){\n            // 구글 아이디로 로그인했는데 회원가입에 정보가 없을 때\n            console.log(\"회원가입 정보를 받습니다.\");\n        }\n    }\n\n    const submitInfo = async () => {\n        await dbService.collection(\"users\").add({\n            name:name,\n            job:job,\n        })\n        alert(\"회원가입이 완료되었습니다.\");\n        history.push('/');\n        history.go();\n    }\n\n    return (\n        <>\n        {done ? \n        <div className=\"login-container\">\n            <div className=\"login__inner\">\n                <div>\n                    회원가입 페이지에 오신 것을 환영합니다.\n                </div>\n                <form className=\"form-container\" onSubmit={e => submitInfo(e)}>\n                    <input \n                        type=\"text\" \n                        placeholder=\"이름을 입력해주세요.\" \n                        required\n                        value={name}   \n                        onChange={e => setName(e.currentTarget.value)}\n                    />\n                    <input  \n                        type=\"text\" \n                        placeholder=\"직업을 입력해주세요.\" \n                        required\n                        value={job} \n                        onChange={e => setJob(e.currentTarget.value)}\n                    />\n                    <input type=\"submit\" value=\"회원가입 완료\" />\n                </form>\n            </div>\n        </div>\n        : \n\n        <div className=\"login-container\">\n            <div className=\"login-container__container\">\n                <div className=\"login__inner\">\n                    <div className=\"login-title\" style={{color:'#6a63f7'}}>\n                        Surfee\n                    </div>\n                    <div className=\"login-title\">\n                        회원가입 페이지에 오신 것을 환영합니다.\n                    </div>\n                    <form onSubmit={e => submit(e)} className=\"center\">\n                        <span className=\"login-label\">\n                            Email\n                        </span>\n                        <Input \n                            type=\"text\" \n                            className=\"login-input\"\n                            placeholder=\"아이디를 입력해주세요.\" \n                            required\n                            value={id}   \n                            onChange={e => setId(e.currentTarget.value)}\n                        />\n                        <span className=\"login-label\">\n                            Password\n                        </span>\n                        <Input  \n                            type=\"password\" \n                            className=\"login-input\"\n                            placeholder=\"비밀번호를 입력해주세요.\" \n                            required\n                            value={password} \n                            onChange={e => setPassword(e.currentTarget.value)}\n                        />\n                        <Input className=\"login-form-button\" type=\"submit\" value=\"회원가입\" />\n                    </form>\n                    <button className=\"google-login-button\" onClick={e => socialLogin(e)} style={{marginTop:'2%'}}>\n                        <img src={googlelogo} width={20}/>\n                        <span style={{marginLeft:'5%'}}>구글 회원가입</span>\n                    </button>\n                    <div style={{padding:'2% 0%', justifyContent:'flex-start', display:'flex', width:'100%'}}>\n                        <Link to=\"/customer\" className=\"footer-text-click\">\n                            개인정보 처리방침\n                        </Link>\n                        <Link to=\"/customer\" className=\"footer-text-click\" style={{marginLeft:'2%'}}>\n                            이용약관\n                        </Link>\n                    </div>\n                </div>\n            </div>\n            <div className=\"login-background\">\n                <img src={s1} width={600} />\n                <div className=\"login-background__desc\" style={{fontFamily:'Pretendard-ExtraBold', marginTop:'2%'}}>\n                    Surfee와 함께 1분만에 완성하는 랜딩페이지\n                </div>\n                <div className=\"login-background__desc\">\n                    Surfee와 함께 1분만에 완성하는 랜딩페이지\n                </div>\n            </div>\n        </div>}\n        </>\n    )\n}\n\nexport default RegisterPage\n"]},"metadata":{},"sourceType":"module"}