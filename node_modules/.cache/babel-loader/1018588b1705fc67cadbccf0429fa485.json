{"ast":null,"code":"var _jsxFileName = \"/Users/oyejin/Surfee/kiwi/src/pages/Response/ResponsePage.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport './ResponsePage.css';\nimport { dbService } from '../../tools/fbase';\nimport { authService } from '../../tools/fbase';\nimport ReactGa from 'react-ga';\nimport NavBarV2 from '../NavAndFooter/NavBarV2';\nimport Footer from '../NavAndFooter/Footer';\nimport { Table, Tag, Space } from 'antd';\nimport MadeLandingCard from '../../components/Response/MadeLandingCard';\nimport gadata from '../../components/Response/data/gadata.json';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst columns = [{\n  title: '이메일',\n  dataIndex: 'email',\n  key: 'email',\n  render: text => /*#__PURE__*/_jsxDEV(\"a\", {\n    children: text\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 17,\n    columnNumber: 23\n  }, this)\n}, {\n  title: '신청한 날짜',\n  dataIndex: 'date',\n  key: 'date',\n  render: date => /*#__PURE__*/_jsxDEV(\"span\", {\n    children: [\"2021\\uB144 \", date.getMonth() + 1, \"\\uC6D4 \", date.getDate(), \"\\uC77C \", date.getHours(), \"\\uC2DC\\uC5D0 \\uC2E0\\uCCAD \"]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 23,\n    columnNumber: 23\n  }, this)\n}, {\n  title: '유입 URL',\n  dataIndex: 'urlId',\n  key: 'urlId',\n  render: text => /*#__PURE__*/_jsxDEV(\"span\", {\n    children: text\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 29,\n    columnNumber: 23\n  }, this)\n}];\n\nfunction ResponsePage({\n  userObj,\n  history\n}) {\n  _s();\n\n  const [id, setId] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [responses, setResponses] = useState([[]]);\n  const [mylandings, setMylandings] = useState([]);\n  const [part, setPart] = useState(1);\n  const [myDatas, setMyDatas] = useState({\n    all_sessions: 0,\n    all_pageViews: 0\n  });\n  const [nowChecking, setNowChecking] = useState(10000);\n  useEffect(() => {\n    // to report page view\n    ReactGa.initialize('UA-213792742-1');\n    ReactGa.pageview(`/seeResponse/${userObj.email}`);\n    getThisUserDatas();\n  }, [loading]);\n\n  const getThisUserDatas = async () => {\n    const thisuserDatas = await dbService.collection('made-page').where(\"makerEmail\", \"==\", userObj.email).get();\n    let thisuserData = thisuserDatas.docs.map(doc => {\n      return { ...doc.data(),\n        id: doc.id\n      };\n    });\n    setMylandings(thisuserData);\n    let tempDatas = [];\n    thisuserData.map(item => {\n      let tempd = [];\n      getDatas(item.setting.urlId).then(i => {\n        tempd = i;\n        tempDatas.push(tempd);\n      });\n    });\n    setResponses(tempDatas);\n    setLoading(true);\n  };\n\n  const getDatas = async urlId => {\n    const reDatas = await dbService.collection(\"apply-datas\") // apply-datas는 유저가 만든 랜딩페이지에 들어와서 목표 액션을 한 데이터.\n    .orderBy(\"created\", \"desc\") // .where(\"urlId\", \"==\", urlId)\n    .get();\n    let reData = reDatas.docs.map(doc => {\n      let day = new Date(doc.data().created);\n      return { ...doc.data(),\n        id: doc.id,\n        date: day\n      };\n    });\n    console.log(reData);\n    return reData;\n  };\n\n  const getMyData = path => {\n    let all_data = gadata.reports[0].data.rows;\n    const myData = all_data.filter(item => item.dimensions[2] === `${path}`);\n    let all_sessions = 0;\n    let all_pageViews = 0;\n    myData.map((item, index) => {\n      console.log(\"여기서\", item.dimensions);\n      console.log(\"세션 수 : \", item.metrics[0].values[0]);\n      console.log(\"페이지 뷰 수 : \", item.metrics[0].values[1]);\n      console.log(\"세션 머무르는 : \", item.metrics[0].values[2]);\n      all_sessions += parseInt(item.metrics[0].values[0]);\n      all_pageViews += parseInt(item.metrics[0].values[1]);\n    });\n    console.log(\"총 세션 수 : \", all_sessions);\n    console.log(\"총 페이지 뷰 수 : \", all_pageViews);\n    const body = {\n      all_sessions,\n      all_pageViews\n    };\n    setMyDatas(body);\n  };\n\n  const returnMylandingsTable = mylandings.map((item, index) => {\n    return /*#__PURE__*/_jsxDEV(MadeLandingCard, {\n      history: history,\n      item: item,\n      index: index,\n      setNowChecking: setNowChecking\n    }, item.id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 13\n    }, this);\n  });\n\n  if (loading === true) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        backgroundColor: 'white',\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center',\n        width: '100%',\n        flexDirection: 'column'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"get-all-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"get-up-container\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"get-up-title\",\n            children: \"\\uAE40\\uD638\\uC9C4 \\uB2D8\\uC758 \\uB300\\uC2DC\\uBCF4\\uB4DC\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"get__mylandings-cantainer\",\n            children: returnMylandingsTable\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"get-buttons-container\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"get-part-button\",\n              style: {\n                backgroundColor: `${part === 1 ? \"#6a63f76e\" : \"white\"}`\n              },\n              onClick: e => setPart(1),\n              children: \"\\uC751\\uB2F5\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 135,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"get-part-button\",\n              style: {\n                backgroundColor: `${part === 2 ? \"#6a63f76e\" : \"white\"}`\n              },\n              onClick: e => setPart(2),\n              children: \"\\uB370\\uC774\\uD130\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 136,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"get-down-container\",\n          children: part === 1 ?\n          /*#__PURE__*/\n          // 응답 파트\n          _jsxDEV(\"div\", {\n            className: \"response-container\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"response-table\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"response-table-top\",\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"response-table-title\",\n                  children: [\" \", nowChecking === 10000 ? \"응답을 볼 페이지를 클릭하세요.\" : /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [\"\\uCD1D \\uBAA9\\uD45C\\uC561\\uC158 \\uC804\\uD658 \\uC218 : \", responses[nowChecking].length, \" \\uBA85\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 145,\n                    columnNumber: 124\n                  }, this), \" \"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 145,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 144,\n                columnNumber: 33\n              }, this), responses.length === 0 ? /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false) : /*#__PURE__*/_jsxDEV(Table, {\n                columns: columns,\n                dataSource: responses[nowChecking],\n                className: \"response-table-datas\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 147,\n                columnNumber: 67\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 143,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 25\n          }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                height: '100vh'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => getMyData(),\n                children: \"\\uB370\\uC774\\uD130 \\uBD88\\uB7EC\\uC624\\uAE30\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 154,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"data-one-mini-card\",\n                  children: [\"\\uCD1D \\uD398\\uC774\\uC9C0 \\uBDF0 \\uC218 \", myDatas.all_pageViews]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 156,\n                  columnNumber: 33\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"data-one-mini-card\",\n                  children: [\"\\uCD1D \\uC138\\uC158 \\uC218 \", myDatas.all_sessions]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 157,\n                  columnNumber: 33\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 155,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 153,\n              columnNumber: 25\n            }, this)\n          }, void 0, false)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 17\n    }, this);\n  } else {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"\\uC720\\uC800 \\uC815\\uBCF4\\uB97C \\uBD88\\uB7EC\\uC624\\uB294 \\uC911\\uC785\\uB2C8\\uB2E4..\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 17\n      }, this)\n    }, void 0, false);\n  }\n}\n\n_s(ResponsePage, \"5De+zVYuzA60LKAbYrQpx97bDCA=\");\n\n_c = ResponsePage;\nexport default ResponsePage;\n\nvar _c;\n\n$RefreshReg$(_c, \"ResponsePage\");","map":{"version":3,"sources":["/Users/oyejin/Surfee/kiwi/src/pages/Response/ResponsePage.js"],"names":["React","useState","useEffect","dbService","authService","ReactGa","NavBarV2","Footer","Table","Tag","Space","MadeLandingCard","gadata","columns","title","dataIndex","key","render","text","date","getMonth","getDate","getHours","ResponsePage","userObj","history","id","setId","password","setPassword","loading","setLoading","responses","setResponses","mylandings","setMylandings","part","setPart","myDatas","setMyDatas","all_sessions","all_pageViews","nowChecking","setNowChecking","initialize","pageview","email","getThisUserDatas","thisuserDatas","collection","where","get","thisuserData","docs","map","doc","data","tempDatas","item","tempd","getDatas","setting","urlId","then","i","push","reDatas","orderBy","reData","day","Date","created","console","log","getMyData","path","all_data","reports","rows","myData","filter","dimensions","index","metrics","values","parseInt","body","returnMylandingsTable","backgroundColor","display","justifyContent","alignItems","width","flexDirection","e","length","height"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react';\nimport './ResponsePage.css';\nimport {dbService} from '../../tools/fbase';\nimport {authService} from '../../tools/fbase';\nimport ReactGa from 'react-ga'\nimport NavBarV2 from '../NavAndFooter/NavBarV2'\nimport Footer from '../NavAndFooter/Footer'\nimport { Table, Tag, Space } from 'antd';\nimport MadeLandingCard from '../../components/Response/MadeLandingCard'\nimport gadata from '../../components/Response/data/gadata.json';\n\nconst columns = [\n    {\n      title: '이메일',\n      dataIndex: 'email',\n      key: 'email',\n      render: text => <a>{text}</a>,\n    },\n    {\n      title: '신청한 날짜',\n      dataIndex: 'date',\n      key: 'date',\n      render: date => <span>2021년 {date.getMonth()+1}월 {date.getDate()}일 {date.getHours()}시에 신청 </span>\n    },\n    {\n      title: '유입 URL',\n      dataIndex: 'urlId',\n      key: 'urlId',\n      render: text => <span>{text}</span>\n    },\n  ];\n  \nfunction ResponsePage({userObj, history}) {\n    const [id, setId] = useState(\"\");\n    const [password, setPassword] = useState(\"\");\n    const [loading, setLoading] = useState(false);\n    const [responses, setResponses] = useState([[]]);\n    const [mylandings, setMylandings] = useState([]);\n    const [part, setPart] = useState(1);\n    const [myDatas, setMyDatas] = useState({\n        all_sessions:0,\n        all_pageViews:0\n    });\n    const [nowChecking, setNowChecking] = useState(10000);\n    \n    useEffect(() => {\n        // to report page view\n        ReactGa.initialize('UA-213792742-1');\n        ReactGa.pageview(`/seeResponse/${userObj.email}`);\n        getThisUserDatas();\n    },[loading])\n\n    const getThisUserDatas = async () => {\n        const thisuserDatas = await dbService\n            .collection('made-page')\n            .where(\"makerEmail\", \"==\", userObj.email)\n            .get();\n        \n        let thisuserData = thisuserDatas.docs.map(doc => {\n            return({...doc.data(), id:doc.id})\n        });\n        setMylandings(thisuserData);\n        \n        let tempDatas = []\n        \n        thisuserData.map(item => {\n            let tempd = []\n            getDatas(item.setting.urlId).then(i => {\n                tempd = i;\n                tempDatas.push(tempd);\n            })\n        })\n        setResponses(tempDatas);\n\n        setLoading(true);\n}\n\n    const getDatas = async (urlId) => {\n        const reDatas = await dbService\n            .collection(\"apply-datas\") // apply-datas는 유저가 만든 랜딩페이지에 들어와서 목표 액션을 한 데이터.\n            .orderBy(\"created\", \"desc\")\n            // .where(\"urlId\", \"==\", urlId)\n            .get();\n\n        let reData = reDatas.docs.map(doc => {\n            let day = new Date(doc.data().created)\n            return({...doc.data(), id:doc.id, date:day})\n        });\n\n        console.log(reData);\n\n        return reData;\n    }\n\n    const getMyData = (path) => {\n        let all_data = gadata.reports[0].data.rows;\n        \n        const myData = all_data.filter(item => item.dimensions[2] === `${path}`);\n        let all_sessions = 0;\n        let all_pageViews = 0;\n        myData.map((item, index) => {\n            console.log(\"여기서\", item.dimensions);\n            console.log(\"세션 수 : \", item.metrics[0].values[0]);\n            console.log(\"페이지 뷰 수 : \", item.metrics[0].values[1]);\n            console.log(\"세션 머무르는 : \", item.metrics[0].values[2]);\n            all_sessions += parseInt(item.metrics[0].values[0]);\n            all_pageViews += parseInt(item.metrics[0].values[1]);\n        })\n        console.log(\"총 세션 수 : \", all_sessions );\n        console.log(\"총 페이지 뷰 수 : \", all_pageViews );\n        const body = {\n            all_sessions,\n            all_pageViews,\n        }\n        setMyDatas(body);\n    }\n\n    const returnMylandingsTable = mylandings.map((item, index) => {\n        return(\n            <MadeLandingCard history={history} item={item} key={item.id} index={index} setNowChecking={setNowChecking} />\n        )\n    })\n        if(loading === true){\n            return (\n                <div style={{backgroundColor:'white', display:'flex', justifyContent:'center',alignItems:'center', width:'100%', flexDirection:'column'}}>\n                <div className=\"get-all-container\">\n                    <div className=\"get-up-container\">\n                        <div className=\"get-up-title\">\n                            김호진 님의 대시보드\n                        </div>\n                        <div className=\"get__mylandings-cantainer\">\n                            {returnMylandingsTable}\n                        </div>\n                        <div className=\"get-buttons-container\">\n                            <button className=\"get-part-button\" style={{backgroundColor:`${part === 1 ? \"#6a63f76e\" : \"white\"}`}} onClick={e => setPart(1)}>응답</button>\n                            <button className=\"get-part-button\" style={{backgroundColor:`${part === 2 ? \"#6a63f76e\" : \"white\"}`}} onClick={e => setPart(2)}>데이터</button>\n                        </div>\n                    </div>\n                    <div className=\"get-down-container\">\n                        { part === 1 ? \n                        // 응답 파트\n                        <div className=\"response-container\">\n                            <div className=\"response-table\">\n                                <div className=\"response-table-top\">\n                                    <span className=\"response-table-title\"> {nowChecking === 10000 ? \"응답을 볼 페이지를 클릭하세요.\" : <div>총 목표액션 전환 수 : {responses[nowChecking].length} 명</div>} </span>\n                                </div>\n                                {responses.length === 0 ? <></> : <Table columns={columns} dataSource={responses[nowChecking]} className=\"response-table-datas\"/>}\n                            </div>\n                        </div>\n                        :\n                        <>\n                        {/* 데이터 파트 */}\n                        <div style={{height:'100vh'}}>\n                            <button onClick={() => getMyData()}>데이터 불러오기</button>\n                            <div>\n                                <span className=\"data-one-mini-card\">총 페이지 뷰 수 {myDatas.all_pageViews}</span>\n                                <span className=\"data-one-mini-card\">총 세션 수 {myDatas.all_sessions}</span>\n                            </div>\n                        </div>\n                        </>\n                        }\n                    </div>\n                </div>\n                <Footer />\n                </div>\n            )\n        }else{\n            return(\n                <>\n                <div>\n                    유저 정보를 불러오는 중입니다..\n                </div>\n                </>\n            )\n        }\n}\n\nexport default ResponsePage\n"]},"metadata":{},"sourceType":"module"}